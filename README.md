# angular-koa-super
В этом проекте реализована идея использования логики одновременно в двух приложениях. Идея технологии заключается в том чтобы запускать скрипт, который формировать из классов с внутренней логикой прокси классы для клиента, методы которых будут через ajax обращаться к методам оригинальных классов

## Этот проект состоит из:
### core - папка с основной логикой
В ней прописана вся логика в виде классов-компонентов (это не angular компоненты, это beans, мысль взята из Java Spring). 
Сервер рабоет с этими классами напрямую, поэтому там можно спокойно работать с нативными и установленными на сервере модулями.

***Чтобы клиент мог корректно использовать классы, в работе с этой папкой есть ограничения!!!***:
 - в ней могут быть только typescript файлы
 - импорты установленных модулей (библиотек, фреймворков установленных на сервере) и нативных модулей только в одну строку
 - в каждом файле только один класс прописанный, так: export class ClassName { - в одну строку, тело класса и закрывающая фигурная скобка в неопределенное количество строк. Пример:   
 ```
 export class ClassName {
    // ...body
 }
 ```
 - вне класса логику прописывать нельзя, только в методах класса
 - внутри класса и после класса объявлять типы данных нельзя, только до объявления класса
 - типы данных с которыми работает класс можно объявлять только до класса
 - методы класса, которые должен вызывать клиент записывать по форме: public async methodName(param: type, param: type): Promise<T> { - одну строку с обязательным объявлением возвращаемого типа, если параметры не нужны, то пустые скобки (), тело метода и закрывающая фигурная скобка можно со следующей строки на неопределенное количество строк. Пример:
 ```
    public async methodName(param1: type) {
    // ...body
 }
 ```
 
 ### core-client - переписанная логика для клиента
 
 ### server - сервер и парсер core
 Здесь есть папки:
  - app - сам сервер
  - parcer - папка со скриптом переписывания классов в папке core
  - auto - генерируемые вышеуказанными скриптами файлы, которыми пользуется сервер
 Тут переписывается логика для клиента, генерируются урлы для взаимодействия с этой логикой, (В общем идет связка клиента с сервером)
 
 ### client - клиентская часть на angular
 Обычный проект ng cli в котором можно работать с классами из core-client
 
 
## В действии
 - Запустите сервер cd server && npm start - появится папка /core-client с перезаписанными классами и файл /server/auto/routes.ts , в котором функция принимающая в себя экзепрязы данных классов (beans) возвращающая роутер, который нужно использовать в корне сервера server.use(createRouter({...deps}))
 - Запустите клиент cd client && npm start - доставайте классы из папки core-client и используйте их в приложении
